model patch_resource {
  id       Int      @id @default(autoincrement())
  storage  String   @db.VarChar(107)
  section  String   @db.VarChar(107)
  name     String   @default("") @db.VarChar(300)
  size     String   @default("") @db.VarChar(107)
  code     String   @default("") @db.VarChar(1007)
  password String   @default("") @db.VarChar(1007)
  note     String   @default("") @db.VarChar(10007)
  hash     String   @default("")
  content  String   @default("")
  type     String[]
  language String[]
  platform String[]
  download Int      @default(0)
  status   Int      @default(0)

  like_by user_patch_resource_like_relation[]

  user_id  Int
  user     user  @relation("user_patch_resource", fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  patch_id Int
  patch    patch @relation("patch_resource", fields: [patch_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  created DateTime @default(now())
  updated DateTime @updatedAt
}

model user_patch_resource_like_relation {
  id Int @id @default(autoincrement())

  user_id     Int
  user        user           @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  resource_id Int
  resource    patch_resource @relation(fields: [resource_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  created DateTime @default(now())
  updated DateTime @updatedAt

  @@unique([user_id, resource_id])
}
